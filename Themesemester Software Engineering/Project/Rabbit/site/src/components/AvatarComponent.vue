<script lang="ts" setup>
import { cva, type VariantProps } from "class-variance-authority";
import { concatStyling } from "../utils/concatStyling";
import { FileTypes } from "~/assets/customTypes";

const avatarVariants = cva("rounded-full flex justify-center items-center", {
    variants: {
        size: {
            large: "size-10",
        },
    },
});

type ButtonProps = VariantProps<typeof avatarVariants>;

withDefaults(
    defineProps<{
        classname?: string;
        size?: ButtonProps["size"];
        url?: string | null;
    }>(),
    {
        classname: "",
        size: "large",
        url: "",
    },
);
</script>

<template>
    <img
        v-if="url"
        :src="url"
        alt="Avatar of a user"
        @error="(e) => (e.target.src = fallbackImage(FileTypes.hopperAvatar))"
        :class="concatStyling(avatarVariants({ size }), 'object-cover', classname)"
    />
    <div
        v-else
        :class="
            concatStyling(
                avatarVariants({ size }),
                'bg-orange-500 fill-orange-600',
                classname
            )
        "
    >
        <svg
            width="20"
            height="28"
            viewBox="0 0 20 28"
            fill="none"
            xmlns="http://www.w3.org/2000/svg"
        >
            <path
                d="M1.66173 0.914498C1.78953 0.812065 1.994 0.673781 2.12179 0.617442C2.30071 0.535496 2.45406 0.509888 2.81188 0.509888C3.06236 0.509888 3.37418 0.540618 3.50198 0.581591C3.62977 0.617442 3.90581 0.73524 4.11539 0.842795C4.32497 0.945228 4.64701 1.13985 4.83104 1.26789C5.01506 1.39593 5.34222 1.67762 5.56713 1.88761C5.78694 2.10272 6.09876 2.44075 6.25723 2.63537C6.41569 2.83512 6.62016 3.09632 6.70706 3.22436C6.79396 3.3524 6.99332 3.69555 7.14668 3.99261C7.30514 4.28967 7.52495 4.76598 7.63741 5.05791C7.75498 5.34473 7.92367 5.85177 8.02079 6.18468C8.11791 6.51246 8.21504 6.8761 8.23037 6.98878C8.24571 7.10145 8.29171 7.33193 8.33261 7.50094C8.36839 7.66996 8.42462 7.95677 8.45529 8.14115C8.48596 8.32553 8.52686 8.80696 8.5882 9.94397L8.76711 9.91324C8.86423 9.89275 9.1965 9.8569 9.50832 9.82617C9.82014 9.79544 10.0746 9.78863 10.1053 9.78351C10.1308 9.78351 10.4744 9.79544 10.8374 9.83129C11.2003 9.86202 11.5326 9.89787 11.5684 9.90812C11.599 9.92348 11.6297 9.91836 11.6348 9.89787C11.6399 9.87227 11.6502 9.74422 11.6604 9.60082C11.6757 9.46253 11.7217 9.05792 11.7626 8.70453C11.8086 8.35114 11.8648 7.91579 11.8904 7.73142C11.916 7.54704 11.9569 7.29607 11.9824 7.16803C12.008 7.03999 12.0744 6.76342 12.1307 6.55344C12.1869 6.34345 12.2789 6.03103 12.3351 5.86201C12.3965 5.693 12.4885 5.41643 12.5498 5.24741C12.6112 5.0784 12.8156 4.61745 13.0099 4.22308C13.199 3.82872 13.5006 3.30119 13.6795 3.0451C13.8584 2.79414 14.2623 2.3332 14.569 2.02077C14.8808 1.71348 15.2949 1.34984 15.4891 1.21668C15.6885 1.08863 15.9747 0.914498 16.1281 0.837673C16.2814 0.760849 16.537 0.653294 16.6904 0.602077C16.8897 0.535496 17.1146 0.509888 17.4571 0.509888C17.861 0.509888 17.9837 0.530374 18.1983 0.632807C18.3415 0.699389 18.5613 0.863282 18.6993 0.991323C18.8322 1.11936 19.0009 1.32423 19.0776 1.44715C19.1491 1.56495 19.2667 1.81079 19.3332 1.99517C19.4405 2.27174 19.4661 2.45099 19.4865 3.09632C19.5121 3.69043 19.4967 3.99261 19.4252 4.42795C19.3792 4.74037 19.3025 5.11937 19.2616 5.27302C19.2207 5.42667 19.1696 5.62642 19.144 5.70836C19.1185 5.79543 19.0776 5.93372 19.052 6.01566C19.0213 6.10273 18.9396 6.3332 18.8629 6.52783C18.7913 6.72757 18.6686 7.02463 18.592 7.19364C18.5204 7.36264 18.3313 7.74159 18.1831 8.03863L18.183 8.03871C18.0297 8.33577 17.8916 8.58673 17.8712 8.6021C17.8559 8.61746 17.8099 8.69941 17.769 8.78135C17.7332 8.8633 17.5594 9.15523 17.3805 9.42156C17.2067 9.68789 16.9051 10.1181 16.7108 10.3691C16.5217 10.62 16.2814 10.9222 16.1792 11.0298C16.0821 11.1424 15.9236 11.3166 15.8316 11.4139C15.7396 11.5163 15.668 11.6085 15.668 11.6239C15.668 11.6392 15.7651 11.7109 15.8878 11.7878C16.0054 11.8646 16.3479 12.1616 16.6444 12.4536C16.9408 12.7455 17.2936 13.1091 17.4265 13.2628C17.5594 13.4164 17.815 13.7647 17.9888 14.031C18.1677 14.2974 18.3824 14.6456 18.4642 14.7993C18.5459 14.9529 18.6993 15.2756 18.8015 15.5163C18.9038 15.757 19.0367 16.1002 19.0929 16.2846C19.1491 16.469 19.2309 16.766 19.2718 16.9504C19.3076 17.1348 19.3638 17.4216 19.3945 17.5906C19.4252 17.7596 19.461 18.1181 19.4763 18.3844C19.4967 18.6969 19.4814 19.122 19.4303 19.5624C19.3843 19.9414 19.3178 20.4024 19.2769 20.5868C19.236 20.7711 19.144 21.104 19.0673 21.3294C18.9907 21.5548 18.8271 21.9594 18.7044 22.2257C18.5766 22.492 18.3875 22.8505 18.2852 23.0195C18.183 23.1886 17.9376 23.5471 17.7332 23.8134C17.5287 24.0797 17.1607 24.4997 16.9102 24.7404C16.6648 24.9811 16.3479 25.2731 16.2048 25.3857C16.0667 25.4984 15.7754 25.7084 15.5658 25.8467C15.3562 25.9901 14.9626 26.2206 14.6968 26.3589C14.431 26.5023 13.9556 26.7123 13.6489 26.8249C13.3422 26.9427 12.9128 27.081 12.7032 27.1374C12.4936 27.1886 12.0642 27.2756 11.7575 27.3166C11.4508 27.3627 10.8272 27.419 10.3773 27.4344C9.85081 27.4549 9.38563 27.4446 9.07382 27.4037C8.808 27.3729 8.4604 27.3166 8.30705 27.2859C8.1537 27.2551 7.81632 27.1732 7.56584 27.1066C7.31536 27.0349 7.05466 26.9735 6.99332 26.9581C6.92687 26.9479 6.87575 26.9222 6.87575 26.9018C6.87575 26.8761 6.82463 26.8557 6.76329 26.8505C6.69684 26.8454 6.59971 26.8147 6.54349 26.7891C6.48726 26.7635 6.23167 26.6457 5.98119 26.5279C5.73071 26.4101 5.32688 26.2001 5.08663 26.0567C4.84637 25.9082 4.4681 25.6521 4.24318 25.4831C4.01827 25.314 3.60421 24.9402 3.32306 24.6585C3.0368 24.3768 2.66875 23.9619 2.50007 23.7366C2.33138 23.5112 2.0809 23.1322 1.93777 22.8915C1.79975 22.6508 1.61573 22.2974 1.52372 22.0976C1.43682 21.8979 1.31924 21.6111 1.26302 21.4574C1.2119 21.3038 1.14033 21.0938 1.10966 20.9965C1.07899 20.8992 1.03299 20.6789 1.00231 20.5099C0.971644 20.3409 0.925638 20.0183 0.894967 19.7929C0.869408 19.5676 0.843849 19.1168 0.843849 18.7942C0.843849 18.4715 0.879632 17.985 0.925638 17.7186C0.971644 17.4523 1.02787 17.0989 1.05343 16.9401C1.07899 16.7763 1.171 16.428 1.25279 16.1719C1.33969 15.9107 1.53394 15.4446 1.68218 15.1322C1.83553 14.8198 2.09624 14.3588 2.27004 14.1079C2.44384 13.8569 2.63297 13.5752 2.69943 13.4882C2.76077 13.4011 3.08281 13.0631 3.40996 12.7353C3.74223 12.4075 4.0336 12.136 4.06427 12.136C4.09494 12.136 4.14606 12.0848 4.18695 12.0234C4.22785 11.9568 4.34031 11.8492 4.44254 11.7775C4.54478 11.7058 4.62657 11.6392 4.62657 11.6239C4.62657 11.6085 4.56523 11.5266 4.48855 11.4344C4.40676 11.3473 4.25341 11.1732 4.14095 11.0502C4.02849 10.9273 3.84446 10.7122 3.73201 10.5739C3.61443 10.4305 3.3844 10.1232 3.2106 9.88251C3.04192 9.64179 2.77099 9.22694 2.60741 8.96061C2.44384 8.69429 2.21381 8.27943 2.09624 8.03871C1.97355 7.798 1.78442 7.39339 1.67196 7.14243C1.56461 6.89146 1.38059 6.40491 1.26813 6.06688C1.15567 5.72885 1.0381 5.3396 1.00743 5.1962C0.976755 5.05791 0.925638 4.75574 0.884743 4.53038C0.843849 4.28454 0.81829 3.75189 0.823402 3.19875C0.828514 2.36905 0.838737 2.24613 0.946085 1.96956C1.01254 1.80054 1.14544 1.53934 1.24768 1.38569C1.34992 1.23204 1.53394 1.02205 1.66173 0.914498Z"
                fill="#B24219"
            />
        </svg>
    </div>
</template>
